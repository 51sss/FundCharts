<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0" />
    <meta name="format-detection" content="telephone=no" />
    <meta name="apple-touch-fullscreen" content="YES" />
    
    <link rel="stylesheet" href="css/index.css">
    <title>FundCharts-折线图</title>
</head>
<body>
    <div id="app">
        <h3 class="f-tc u-tit">1.示例1</h3>
        <section id="line1" class="u-part"></section>

        <h3 class="f-tc u-tit g-mt20">2.示例2</h3>
        <section id="line2" class="u-part"></section>
		
		<h3 class="f-tc u-tit g-mt20">3.示例3</h3>
        <section id="line3" class="u-part"></section>
		
		<h3 class="f-tc u-tit g-mt20">4.示例4</h3>
        <section class="u-part">
            <canvas id="line4Chart" width="375" height="220"></canvas>
        </section>
    </div>
    <script src="../../FundCharts.min.js"></script>	<!-- 引用库 -->
    <script>
var LineChart = FundCharts.line;

// chart 1
var chart1 = new LineChart({
    id: 'line1',
    xaxis: ['07-11', '08-11', '09-11', '09-22', '10-11', '11-11', '12-11'],
    datas: [
        [1, 2, 3, 4, 3.5, 3, 4]
    ],
    hover: function (index, values, xaxis) { // 索引，datas集合，xaxis[index]，触控点横坐标x
        console.log(values[0], xaxis);
    }
});

chart1.init();

// chart 2
var chart2 = new LineChart({
    id: 'line2',
    xaxis: ['07-11', '08-11', '09-11', '09-22', '10-11', '11-11', '12-11'],
    chartLeft: 15,      // 图形区域距左边距离
    chartRight: 1,      // 图形区域距右边距离
    chartTop: 25,       // 图形区域距顶部距离
    noGradient: true,   // 无渐变面积（纯折线图）
    yaxisfunc: function (data) {    // 控制y轴坐标展示格式
        return data.toFixed(0)
    },
    datas: [
        [6, 2, 3, 4, 3.5, 3, 4],
        [4, 3, 4, 2, 3, 5, 6]
    ],
	lineWidths: [3, 1],		// 各折线粗细
    hover: function(index, values, xaxis, x) {
        console.log(values[0], xaxis);
		
		/** 自定义添加label */
        var _x = x;

        // rect
        var ctx = chart2.ctx;
        ctx.fillStyle = '#9d9d9d';
        var _rectX = _x - 32;
        _rectX = _rectX < 50 ? 50 : _rectX > 300 ? 300 : _rectX;
        ctx.fillRect(_rectX, 26, 64, 15);

        // text
        ctx.fillStyle = '#fff';
        ctx.font = '10px Arial';
        ctx.textAlign = 'center';
        ctx.fillText(xaxis + ':' + values, _rectX + 32, 35);
		ctx.closePath();
		ctx.stroke();
    }
});

chart2.init();

// chart 3
var chart3 = new LineChart({
	id: 'line3',
	xaxis: ['07-11', '08-11', '09-11', '09-22', '10-11', '11-11', '12-11'],
    datas: [
        [1, 2, 6, 4, 3.5, 3, 4],
        [4, 3, 4, 2, 3, 5, 6],
		[6, 2, 4, 5, 5, 2, 1]
    ],
    allGradient: true,   // 纯面积图
	colors: ['#13C2C2', '#FADB14', '#FA541C', '#2F54EB', '#F5222D'],    // 自定义颜色
	pointStyle: '#666',			// 点
    backgroundColor: '#222',	// 背景色
    font: {             // x/y轴颜色
        fontFamily: 'serif',    // 字体
        color: '#eee',
        fontSize: {     // 字号
            x: '8px',
            y: '8px'
        }
    },
	noDash: true,			// 没有网格虚线
	noAnimation: true,		// 没有动画过渡
    noHoverLine: true,		// 触控效果没有线
    events: ['mousemove']   // 交互事件为pc鼠标mousemove事件
});

chart3.init();


setTimeout(function () {
chart3.update({
xaxis: ['07-11', '08-11', '09-11', '09-22', '10-11', '11-11', '12-11'],
    datas: [
    
        [4, 3, 4, 2, 3, 5, 6],
        [1, 2, 3, 4, 3.5, 3, 4],
		[6, 2, 4, 5, 5, 2, 1]
    ]
})
}, 3000);

// chart 4
var chart4 = new LineChart({
    id: 'line4Chart',
    xaxis: ['03-11', '04-11', '05-11', '06-11', '07-11', '08-11', '09-11', '09-22', '10-11', '11-11', '12-11'],
    data: [4, 3, 4, 2, 1, 2, 3, 4, 3.5, 3, 4],
	hoverLineColor: 'orange',		// 触控线的颜色
	handleTextX: (ctx, xArr) => {      // 处理x轴文字
        // 增加x轴刻度
        var _chartWidth = chart4._chart.width - chart4.opts.chartLeft - chart4.opts.chartRight;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.font = '10px Arial';
        ctx.fillStyle = '#333';
		
        for (var i in xArr) {
          ctx.fillText(xArr[i], (_chartWidth / (xArr.length - 1) * i) + chart4.opts.chartLeft, chart4._chart.height - 13);
        }
    },
    hover: function(index, values, xaxis) {
        var _datasets = chart4.datasets[0];
        var ctx = chart4.ctx;
        ctx.save();
        ctx.lineWidth = 1;
        ctx.textAlign = 'center';
        ctx.textBaseline = 'middle';
        ctx.font = '12px Arial';
        ctx.fillStyle = '#333';
        
        ctx.fillText(
            values[0].toFixed(2), 
            _datasets[index].x < 65 ? 65 : _datasets[index].x,
            _datasets[index].y - 15
        );
        ctx.restore();
    }
});

chart4.init();

setInterval(function () {
    // 模拟触控交互
    chart4.drawer.drawHover(Math.floor(Math.random() * (chart4._chart.width - 50)) + 50);
}, 600);

    </script>
</body>
</html> 